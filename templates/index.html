{% extends 'base.html' %}
{% load static %}

{% block title %}Find Your Perfect College - College Finder{% endblock %}

{% block content %}

<div class="course-box">
            <ul class="course-list">
                <li>
                    <div class="course-item">ALL courses</div>
                </li>

                {% for course in courses %} {# Assumes 'courses' context variable exists #}
                <li>
                   <div style="--animation-order: {{ forloop.counter }};" class="course-item">
                    <a href="{% url 'course_detail' course.id %}" class="course-list-item">
                        {{ course.name }}
                    </a>
                </div>
                </li>
                

                {% endfor %}
                
            </ul>
        </div>

        
        
        
        <div class="container">
            <div class="slider-container">
            
            <form class="overlay-content" action="{% url 'search' %}" method="GET">

                
                <input type="text" name="q" placeholder="Search for colleges, courses, or cities..." required>
                <button type="submit" class="btn btn-primary">Search</button>
            </form>

            <div class="slide fade">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuivd8QIQ88bACJxgDSs0BNPipd-0l1dKBdg&s" alt="Image 1" style="width:100%">
            </div>
            <div class="slide fade">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQsLo71CoFj-wCQXK7j4o7WZSO1LkyKiqR06g&s" alt="Image 2" style="width:100%">
            </div>
            <div class="slide fade">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSuO3rNw0LZnVUn69N7nTx7m1Wstty5mfbDAg&s" alt="Image 3" style="width:100%">
            </div>

            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>

        <div class="dots-container">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>
    </div>

    <section class="hero-section">
  <div class="hero-left">
    <div class="hero-content">
      <h1>Discover and Find the <br> <span>Best Right College</span></h1>
      <p>Your journey to the perfect education starts here.</p>
      <a href="#courses" class="btn btn-primary hero-explore-btn">Explore Colleges</a>
    </div>
  </div>

  <div class="hero-right" data-speed="0.9">
    <img src="{% static 'collegewithgraduation.jpg' %}" alt="College" class="hero-img">
  </div>
</section>

    <section id="courses" class="container">
        <h2 class="section-heading">Browse by Course</h2>
        <div class="grid-container">
            {% for course in courses %}
            <a href="{% url 'course_detail' course.id %}" class="category-card">
                <img src="https://via.placeholder.com/300x180/007bff/fff?text={{ course.name }}" alt="{{ course.name }}" class="category-card-image">
                <div class="category-card-content">
                    <h3>{{ course.name }}</h3>
                    <p>{{ course.colleges.count }} Colleges Available</p>
                </div>
            </a>
            {% empty %}
            <p>No courses available yet. Check back soon!</p>
            {% endfor %}
        </div>
    </section>

    <section id="cities" class="container">
        <h2 class="section-heading">Browse by City</h2>
        <div class="grid-container">
            {% for city in cities %}
            <a href="{% url 'city_colleges' city.id %}" class="category-card">
                {% if city.image %}
                <img src="{{ city.image.url }}" alt="{{ city.name }}" class="category-card-image">
                {% else %}
                <img src="https://via.placeholder.com/300x180/5a6268/fff?text={{ city.name }}" alt="{{ city.name }}" class="category-card-image">
                {% endif %}
                <div class="category-card-content">
                    <h3>{{ city.name }}</h3>
                    <p>{{ city.colleges.count }} Colleges Available</p>
                </div>
            </a>
            {% empty %}
            <p>No cities available yet. Check back soon!</p>
            {% endfor %}
        </div>
    </section>

    <section id="cities" class="container">
        </section>

    <section id="top-colleges" class="container top-colleges-section">
        <h2 class="section-heading">Top Ranked Colleges</h2>

        <div class="course-filter-bar">
            <form method="GET" action="#top-colleges"> <label for="course_filter">Filter by Course:</label>
                <select name="course_filter" id="course_filter">
                    <option value="">All Courses</option>
                    {% for course in all_courses %}
                    <option value="{{ course.id }}"
                        {% if selected_course_id == course.id|stringformat:"s" %}selected{% endif %}>
                        {{ course.name }}
                    </option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-primary">Filter</button>
                <a href="{% url 'home' %}#top-colleges" class="btn btn-secondary">Clear</a>
            </form>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>College</th>
                        <th>City</th>
                        <th>Ranking Source</th>
                        <th>Fees (Per Year)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for college in top_colleges %}
                    <tr>
                        <td><strong>{{ college.rank }}</strong></td>
                        <td><a href="{% url 'college_detail' college.id %}">{{ college.name }}</a></td>
                        <td>{{ college.city.name }}</td>
                        <td>{{ college.rank_source|default:"N/A" }}</td>
                        <td>â‚¹{{ college.fees_per_year }} Lakhs</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" style="text-align: center;">
                            No ranked colleges found matching your criteria.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>


    



{% endblock %}